#include "math.hpp"



//////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////
int randRange(int min, int max)
{
	// Obtain a random number from hardware
	std::random_device rd;
	// Seed the generator
	std::mt19937 gen(rd());
	// Define the range
	std::uniform_int_distribution<> distr(min, max);

	return distr(gen);
}


//////////////////////////////////////////////////////////////////
/// \brief Array containing the 
//////////////////////////////////////////////////////////////////
uint16_t SIN[129] =
{
	0, 1571, 3140, 4708, 6273, 7834, 9391, 10942, 12486, 14022, 15551,
	17070, 18578, 20076, 21561, 23033, 24492, 25935, 27364, 28775, 30169,
	31545, 32903, 34240, 35556, 36852, 38125, 39375, 40601, 41803, 42980,
	44131, 45255, 46352, 47421, 48461, 49473, 50454, 51405, 52325, 53214,
	54071, 54895, 55686, 56443, 57166, 57855, 58509, 59128, 59712, 60259, 
	60770, 61244, 61682, 62082, 62445, 62770, 63058, 63307, 63519, 63692, 
	63827, 63923, 63981, 64000, 63981, 63923, 63827, 63692, 63519, 63307, 
	63058, 62770, 62445, 62082, 61682, 61244, 60770, 60259, 59712, 59128, 
	58509, 57855, 57166, 56443, 55686, 54895, 54071, 53214, 52325, 51405, 
	50454, 49473, 48461, 47421, 46352, 45255, 44131, 42980, 41803, 40601, 
	39375, 38125, 36852, 35556, 34240, 32903, 31545, 30169, 28775, 27364, 
	25935, 24492, 23033, 21561, 20076, 18578, 17070, 15551, 14022, 12486, 
	10942, 9391, 7834, 6273, 4708, 3140, 1571, 0

};


//////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////
float mat_sin(float theta)
{
	theta /= 3.141592653;
	theta /= 2;
	theta -= (int)theta;
	theta *= 2;

	float sign = 1.0f;

	if (theta < 0) theta += 2;
	if (theta >= 1) { theta -= 1; sign = -1.0f;}
	theta *= 128;

	int deg = (int)theta;
	float extrp = theta - (float)deg;
	float va = sign*SIN[deg]/64000;
	float vb = sign*SIN[deg + 1]/64000;

	float result = va + (vb-va)*extrp;

    return result;
}


//////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////
float mat_cos(float theta)
{


	theta /= (3.141592653);
	theta += .5;
	theta /= 2;
	theta -= (int)theta;
	theta *= 2;
	
	float sign = 1.0f;

	if (theta < 0) theta += 2;
	if (theta >= 1) { theta -= 1; sign = -1.0f;}
	theta *= 128;

	int deg = (int)theta;
	float extrp = theta - deg;
	float va = sign*SIN[deg]/64000;
	float vb = sign*SIN[deg + 1]/64000;

	float result = va + (vb-va)*extrp;

    return result;
}


//////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////
float mat_tan(float theta)
{
	float result = mat_sin(theta)/mat_cos(theta);
    return result;
}